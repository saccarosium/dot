#!/bin/sh

alias uplower="tr '[:upper:]' '[:lower:]'"
cd "$NOTES" || exit

search_note(){
  local target=$(find . -name "*.md" | fzf | uplower)
  [ -n "$target" ] && "$EDITOR" "$target" || exit 1
}

grep_note(){
    grep " " -R -I ./* | fzf | sed "s/:.*//g" | xargs -r "$EDITOR"
}

[ "$#" = 0 ] && search_note
[ "$1" = grep ] && grep_note
